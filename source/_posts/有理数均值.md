---
title: 有理数均值
date: 2020-02-08 16:12:20
tags: 编程题
---

### 题目

<img src="有理数均值\1.png" style="zoom:80%;" />

**其实题目并不难，关键在于辗转相除法**

<!--more-->

### 需要解决的问题

1.计算俩分数之和（这里用交叉相乘会快一些）

2.找出最大公因数以化简（这里用[辗转相除法](https://baike.baidu.com/item/%E6%AC%A7%E5%87%A0%E9%87%8C%E5%BE%97%E7%AE%97%E6%B3%95/1647675?fromtitle=%E8%BE%97%E8%BD%AC%E7%9B%B8%E9%99%A4%E6%B3%95&fromid=4625352&fr=aladdin#1)）

> 假如需要求 1997 和 615 两个正整数的最大公约数,用欧几里德算法(辗转相除法)，是这样进行的：
>
> 1997 / 615 = 3 (余 152)
>
> 615 / 152 = 4(余7)
>
> 152 / 7 = 21(余5)
>
> 7 / 5 = 1 (余2)
>
> 5 / 2 = 2 (余1)
>
> 2 / **1** = 2 (余0)
>
> 至此，最大公约数为1

### 代码区

```c
#include<stdio.h>
#include<math.h>
int gcd(int m,int n);//找最大公因数的函数 
int main()
{
	int n,i;
	int a1=0,b1=1;//第一个数是0，让0加上第一个数作为开篇计算
	int a2,b2,a,b; 
	int g;//最大公因数的载体 
//	printf("请输入有理数的个数  ");
	scanf("%d",&n);
//	printf("请输入这%d个有理数 ",n); 
    //下面是求N项的和
	for(i=0;i<n;i++)
	{
		a2=1;b2=1,g=1;//防止输入的时候把5/1直接输成了5（举例） 
		scanf("%d/%d",&a2,&b2);
		a=a1*b2+a2*b1;//交叉相乘再相加作为分子
		b=b1*b2;//分母相乘作为新的分母
		if(a!=0)	g=gcd(a,b);//找分子分母的最大公因数
         //但前提是分子分母不能为0，因为gcd函数里有取余符，该双目运算符两边都不能为0
		//所以当分子为0的时候就公因数就为1(循环中的第一步定义了) 
		a1=a/g;b1=b/g;//将化简的结果作为第一个数参与下一轮计算 
	}
	if(a==0)
	{
		printf("0");return 0;//分子为0的直接走人就行 
	}
    //下面是求N项的均值
	b1=b1*n;//分数除以n求平均值=分母*n
	g=gcd(a1,b1);//找最终数的最大公因数
	a1=a1/g;b1=b1/g;//化简
//	printf("这些有理数的均值为  ");
	if(b1==1)	printf("%d",a1);
	else	printf("%d/%d",a1,b1);
}

int gcd(int m,int n)//辗转相除法 
{
	int yu;//定义余数
	n=(int)fabs(n);m=(int)fabs(m);//辗转相除法用于正整数 
	while(n%m)//循环到俩数能整除时，此时的除数便是最大公因数
	{
		yu=n%m;//这一步很奇妙。如果n比m小的话，经过一轮循环后n和m会调换, 因此m最终会是比较小的数 
		n=m;//被除数变成较小的那个数 
		m=yu;//除数变成余数 
	}
	return m;
} 
```

----

**未用辗转相除法时会运行超时，未对分子分母为0的情况单独处理会出运行出错或浮点错误。**